<ion-header>
  <ion-toolbar>
    <ion-title>
      <ion-button color="primary" routerLink="/" > < </ion-button>
      Search or add
      <odm-sync-status></odm-sync-status>
      <ion-button routerLink="/learn/quiz">QUIZ</ion-button>
    </ion-title>
    <div
      style="display: flex; align-items: stretch"
    >
      <div style="flex-grow: 1">
        <ion-searchbar
          [(ngModel)]="search"
          (ngModelChange)="onChangeSearch($event)"
          placeholder="Search or add"
          debounce="50"
          inputmode="search"
          (keyup.enter)="addTask()"
          (keyup.meta.enter)="addToLearn()"
          (keyup.alt.enter)="addToLearn()"
          (keyup.control.enter)="addToLearn()"
        ></ion-searchbar>
        <ion-button
          (click)="addTask()"
          [disabled]="! search?.trim().length"
        >ADD TASK</ion-button>

        <ion-button
          (click)="addToLearn()"
          [disabled]="! search?.trim().length"
        >ADD TO LEARN</ion-button>
        <ion-text style="color: gray"> Items: {{ items?.length }}, {{ itemsWithRatingCount2 }} {{ itemsWithRatingCount | json}}</ion-text>
      </div>
      <app-mic style="display: flex; align-items: stretch"></app-mic>

    </div>

  </ion-toolbar>
</ion-header>

<ion-content
  (window:keyup.meta.enter)="addToLearn()"
>
<!--  <ion-textarea-->
<!--    [(ngModel)]="search"-->
<!--    placeholder="Search or add"-->
<!--    debounce="100"-->
<!--    inputmode="search"-->
<!--    [rows]="2"-->
<!--    (keyup.enter)="add()"-->
<!--  ></ion-textarea>-->


<!--  asfasf: {{(coll.valueChanges() | async)?.length}}-->
<!--  <ion-item *ngFor="let item of (coll.valueChanges() | async)">-->

<!--  <ng-container *ngFor="let item of items; trackBy: trackByFn">-->
<!--    <app-actionable-item-->
<!--      [hidden]="! matchesSearch(item)"-->
<!--      [item]="item"-->
<!--    ></app-actionable-item>-->

<!--  </ng-container>-->

  <ion-virtual-scroll
      [items]="filteredItems"
      approxItemHeight="31px"
      [trackBy]="trackByFn"
  >
    <div *virtualItem="let currItem">
      <app-actionable-item
        [item]="currItem"
      ></app-actionable-item>
      <!-- [hidden]="! matchesSearch(currItem)"-->
    </div>
  </ion-virtual-scroll>

</ion-content>
