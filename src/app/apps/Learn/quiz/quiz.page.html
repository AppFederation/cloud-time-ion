<ion-header>
  <ion-toolbar>

    <ion-title>
      <!--      <ion-button (click)="window.history.back()"><</ion-button>-->
      <ion-button routerLink="/learn"><</ion-button>

      <odm-sync-status></odm-sync-status>
      <!--      {{(item?.locallyVisibleChanges$ | async)?.title}}</ion-title>-->
      <!--      {{((doc.valueChanges() | async)?.title) || "test"}}-->
      QUIZ
      <!--      {{(doc.get() | async)?.title || "test"}}-->
    </ion-title>
  </ion-toolbar>

</ion-header>

<ion-content>
  <ion-item>
    <ion-checkbox [(ngModel)]="dePrioritizeNewMaterial">
    </ion-checkbox>
    <ion-label>
      &nbsp; DE-PRIORITIZE NEW MATERIAL <!--{{dePrioritizeNewMaterial | json}}-->
    </ion-label>
  </ion-item>

  <ion-note>
    {{ (item$$ | async)?.id }}
  </ion-note>

  <app-play-button
    [item]="(item$$ | async)?.locallyVisibleChanges$ | async"
    [itemId]="(item$$ | async)?.id"
  ></app-play-button>

  <p>
    {{ getSideValForQuiz$() | async }}
  </p>
<!--  <ng-container>(ahead of time by X hours)</ng-container>-->
<!--  <ng-container>(overdue X hours)</ng-container>-->

<!--  hoursDiff = {{ (quizService.calculateWhenNextRepetitionMsEpoch(item$ | async) - nowMs()) * 1000 * 3600 }}-->
  <p>
    next repetition:
    {{ newDate(quizService.calculateWhenNextRepetitionMsEpoch(item$$ | async, dePrioritizeNewMaterial))?.toISOString()?.replace('T', ' ') }}
  </p>

  <ion-button
    (click)="showAnswer()"
  >Show answer</ion-button>

  <ion-button
    [routerLink]="'/learn/item/'+(item$$ | async)?.id"
  >EDIT</ion-button>

  <p *ngIf="shouldShowAnswer">
    {{ (item$$ | async)?.currentVal?.joinedSides() }}
  </p>

  <app-self-rating
    [autoSave]="false"
    *ngFor="let dummy of dummyArray"
    [item$]="item$$ | async"
    (numericValue)="selfRating = $event"
  ></app-self-rating>

  <ion-button
    (click)="applyAndNext()"
  >
    APPLY & NEXT
  </ion-button>

</ion-content>
